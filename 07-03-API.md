# API

Tiny Hippo 点餐系统API文档

## 顾客账号

### POST `/api/restaurant/customer/record` 提交顾客的相关信息

#### Parameters

- body (*required*) 顾客信息
  - example value
    ```js
    {
      "table": 0,
      "customerId": "string",
      "customerName": "string",
      "customerImageUrl": "string"
    }
    ```
  - parameter content type: `application/json`

#### Responses

- 200, OK
- 400
  - Example Value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```


### PUT `/api/restaurant/customer/edit` 编辑顾客小订单

#### Parameters

- body *(required)* 更改后的订单信息
  - example value
    ```js
    {
      "orderInfo": {
        "orderId": 0,
        "table": 0,
        "dish": [
          {
            "dishId": 0,
            "categoryId": 0,
            "name": "string",
            "price": 0,
            "imageUrl": "string"，
            "number": 0, // 该菜品的数量
            "sum": 0, // 该菜品的总金额，不方便也可以不加
            "orderNumber": 0, // 这个是已下单的数量
          }
        ],
        "requirement": [
          {
            "number": 0,
            "description": "string"
          }
        ],
        "totalPrice": 0,
        "customerId": "string",
        "time": "2018-06-27T14:42:01.384Z",
        "paymentStatus": 0,
        "cookingStatus": "string"
      }
    }
    ```
  - parameter content type: `application/json`

#### Responses
- 200
	 400	
  - Example Value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/customer/read` 查看顾客小订单

#### Parameters

无

#### Responses

- 200
  - example value
    ```js
    {
      "orderInfo": {
        "orderId": 0,
        "table": 0,
        "dish": [
          {
            "dishId": 0,
            "categoryId": 0,
            "name": "string",
            "price": 0,
            "imageUrl": "string"
          }
        ],
        "requirement": [
          {
            "number": 0,
            "description": "string"
          }
        ],
        "totalPrice": 0,
        "customerId": "string",
        "time": "2018-06-27T14:48:40.887Z",
        "paymentStatus": 0,
        "cookingStatus": "string"
      },
      "customerName": "string",
      "customerImageUrl": "string"
    }
    ```
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/table/read` 查看餐桌订单

#### Parameters

无

#### Responses

- 200
  - example value
    ```js
    [
      [
        {
          "orderId": 0,
          "table": 0,
          "dish": [
            {
              "dishId": 0,
              "categoryId": 0,
              "name": "string",
              "price": 0,
              "imageUrl": "string"
            }
          ],
          "requirement": [
            {
              "number": 0,
              "description": "string"
            }
          ],
          "totalPrice": 0,
          "customerId": "string",
          "time": "2018-06-27T14:51:05.637Z",
          "paymentStatus": 0,
          "cookingStatus": "string"
        }
      ]
    ]
    ```
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/table/payment` 支付餐桌订单

#### Parameters

无

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/customer/category` 获取菜单

#### Parameters

无

#### Responses

- 200
  - example value
    ```js
    {
      "categoryId": 0,
      "name": "string",
      "dish": {
        "dishId": 0,
        "categoryId": 0,
        "name": "string",
        "price": 0,
        "imageUrl": "string"
      }
    }
    ```
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

## 餐厅账号

### POST `/api/restaurant/session` 餐厅登录

#### Parameters

- body *(required)*
  - example value
    ```js
    {
      "phone": "string",
      "password": "string"
    }
    ```
  - parameter content type: `application/json`

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### DELETE `/api/restaurant/session` 退出餐厅登录

#### Parameters

无

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/category` 获取菜单

#### Parameters

- body *(required)*
  - example value
    ```js
    {
      "categoryId": 0,
      "name": "string",
      "dish": {
        "dishId": 0,
        "categoryId": 0,
        "name": "string",
        "price": 0,
        "imageUrl": "string"
      }
    }
    ```

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### POST `/api/restaurant/category` 新增菜品

#### Parameters

- body *(required)*
  - example value
    ```js
    {
      "dishId": 0,
      "categoryId": 0,
      "name": "string",
      "price": 0,
      "imageUrl": "string"
    }
    ```
  - parameter content type: `application/json`

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### PUT `/api/restaurant/dish/{dishId}` 修改菜品信息

#### Parameters

- `dishId (interger)`, 菜品ID
- body
  - example value
    ```js
    {
      "dishId": 0,
      "categoryId": 0,
      "name": "string",
      "price": 0,
      "imageUrl": "string"
    }
    ```
  - parameter content type: `application/json`

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### DELETE `/api/restaurant/dish/{dishId}` 删除菜品

#### Parameters

- `dishId (interger)`, 待删除菜品名称

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### POST `/api/restaurant/category/` 新增分类

#### Parameters

- body *(required)*
  - example value
    ```js
    {
      "categoryName": "string"
    }
    ```
  - parameter content type: `application/json`

#### Responses

- 200
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

### GET `/api/restaurant/order` 获取订单

#### Parameters

- `pageSize (integer) (query)`, 每页显示多少订单
- `pageNumber (integer) (query)`, 页数
	
#### Responses

- 200
  ```js
  [
    {
      "orderId": 0,
      "table": 0,
      "dish": [
        {
          "dishId": 0,
          "categoryId": 0,
          "name": "string",
          "price": 0,
          "imageUrl": "string"
        }
      ],
      "requirement": [
        {
          "number": 0,
          "description": "string"
        }
      ],
      "totalPrice": 0,
      "customerId": "string",
      "time": "2018-06-27T15:07:15.590Z",
      "paymentStatus": 0,
      "cookingStatus": "string"
    }
  ]
  ```
- 400
  - example value
    ```js
    {
      "code": "string",
      "message": "string"
    }
    ```

## 推荐系统

### GET `/api/restaurant/recommendation` 获取所有推荐

```js
details
```

## 模型

### Record

```js
{
  table integer($int64)
  customerId	string
}
```

### Restaurant

```js
{
  restaurantId	integer($int64)
  name	string
  phone	string($int32)
  email	string
}
```

### Customer

```js
{
  customerId	string
}
```

### Category

```js
{
  categoryId	integer($int64)
  name	string
  dish	Dish{...}
}
```

### Dish

```js
{
  dishId	integer($int64)
  categoryId	integer($int64)
  name	string
  price	number
  imageUrl	string
}
```

### DishDescription

```js
{
  comment	string
  monthlySales	string
  hot	boolean
}
```

### Requirement

```js
{
  number	integer($int32)
  description	string
}
```

### Order

```js
{
  orderId	integer($int64)
  table	integer($int64)
  dish	Dish [...]
  requirement	Requirement [...]
  totalPrice	number
  customerId	string
  time	string($date-time)
  paymentStatus	integer($int32)
  cookingStatus	string
}
```

### Table
```js
{
  TableID	integer($int64)
}
```